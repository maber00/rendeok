---
import { Image } from 'astro:assets';

// Importar imágenes
import comercialesImg from '../assets/Que-hacemos/Comerciales-400x400.webp';
import videoImg from '../assets/Que-hacemos/Video-400x400.webp';
import fotografiaImg from '../assets/Que-hacemos/Fotografia-400x400.webp';

// Definir datos de servicios con las imágenes importadas
const serviceImages = {
    comerciales: comercialesImg,
    video: videoImg,
    fotografia: fotografiaImg
};
---
<section class="what-we-do-container min-h-screen md:px-20 px-6 py-40 bg-black text-white">
  <!-- Header Section -->
  <div class="text-left">
      <h2 class="md:text-[150px] text-6xl font-bold mb-2 leading-none">QUÉ HACEMOS</h2>
      <div class="w-800 h-0.5 bg-[#B1293E] scale-x-0 mb-2" id="underline"></div>
      <p class="text-xl mt-2">Conoce nuestros servicios</p>
  </div>

  <div class="grid md:grid-cols-[1fr_1fr_1fr_30%] grid-col-1 gap-4 pt-8">
      <!-- Columna 1: PRODUCCIÓN DE COMERCIALES -->
      <div>
          <div class="bg-[#00507C] mb-4 service-col" data-img={serviceImages.comerciales.src}>
              <h3 class="text-2xl font-bold p-2 text-center leading-none">PRODUCCIÓN DE COMERCIALES</h3>
          </div>
          <div class="bg-[#3B82F6] mb-4 service-col" data-img={serviceImages.comerciales.src}>
              <h3 class="text-lg font-regular p-2">• Comerciales para Televisión y plataformas digitales</h3>
          </div>
          <div class="bg-[#3B82F6] mb-4 service-col" data-img={serviceImages.comerciales.src}>
              <h3 class="text-lg font-regular p-2">• Videomatic (Piloto de la idea de un comercial para ser testeado)</h3>
          </div>
          <div class="bg-[#3B82F6] mb-4 service-col" data-img={serviceImages.comerciales.src}>
              <h3 class="text-lg font-regular p-2">• Postproducción de Comerciales</h3>
          </div>
          <div class="bg-[#3B82F6] mb-4 service-col" data-img={serviceImages.comerciales.src}>
              <h3 class="text-lg font-regular p-2">• Rotoscopia</h3>
          </div>
      </div>
    
      <!-- Columna 2: PRODUCCIÓN DE VIDEO -->
      <div>
          <div class="bg-[#008445] mb-4 service-col" data-img={serviceImages.video.src}>
              <h3 class="text-2xl font-bold p-2 text-center leading-none">PRODUCCIÓN DE VIDEO</h3>
          </div>
          <div class="bg-[#22C55E] mb-4 service-col" data-img={serviceImages.video.src}>
              <h3 class="text-lg font-regular p-2">• Corporativo o Institucional</h3>
          </div>
          <div class="bg-[#22C55E] mb-4 service-col" data-img={serviceImages.video.src}>
              <h3 class="text-lg font-regular p-2">• Lanzamiento de producto</h3>
          </div>
          <div class="bg-[#22C55E] mb-4 service-col" data-img={serviceImages.video.src}>
              <h3 class="text-lg font-regular p-2">• Video Marketing</h3>
          </div>
          <div class="bg-[#22C55E] mb-4 service-col" data-img={serviceImages.video.src}>
              <h3 class="text-lg font-regular p-2">• Video Animado / Motion Graphics</h3>
          </div>
          <div class="bg-[#22C55E] mb-4 service-col" data-img={serviceImages.video.src}>
              <h3 class="text-lg font-regular p-2">• Tomas Aéreas</h3>
          </div>
          <div class="bg-[#22C55E] mb-4 service-col" data-img={serviceImages.video.src}>
              <h3 class="text-lg font-regular p-2">• Capacitación</h3>
          </div>
          <div class="bg-[#22C55E] mb-4 service-col" data-img={serviceImages.video.src}>
              <h3 class="text-lg font-regular p-2">• Detrás de Cámaras</h3>
          </div>
          <div class="bg-[#22C55E] mb-4 service-col" data-img={serviceImages.video.src}>
              <h3 class="text-lg font-regular p-2">• Himnos / Videoclip</h3>
          </div>
          <div class="bg-[#22C55E] mb-4 service-col" data-img={serviceImages.video.src}>
              <h3 class="text-lg font-regular p-2">• Video 360</h3>
          </div>
          <div class="bg-[#22C55E] mb-4 service-col" data-img={serviceImages.video.src}>
              <h3 class="text-lg font-regular p-2">• Responsabilidad Social</h3>
          </div>
      </div>
    
      <!-- Columna 3: FOTOGRAFÍA PUBLICITARIA -->
      <div>
          <div class="bg-[#84020B] mb-4 service-col" data-img={serviceImages.fotografia.src}>
              <h3 class="text-2xl font-bold p-2 text-center leading-none">FOTOGRAFÍA PUBLICITARIA</h3>
          </div>
          <div class="bg-[#EF4444] mb-4 service-col" data-img={serviceImages.fotografia.src}>
              <h3 class="text-lg font-regular p-2">• Corporativa</h3>
          </div>
          <div class="bg-[#EF4444] mb-4 service-col" data-img={serviceImages.fotografia.src}>
              <h3 class="text-lg font-regular p-2">• Producto</h3>
          </div>
          <div class="bg-[#EF4444] mb-4 service-col" data-img={serviceImages.fotografia.src}>
              <h3 class="text-lg font-regular p-2">• Inmobiliaria</h3>
          </div>
      </div>
    
      <!-- Columna 4: Panel de Imagen -->
      <div class="bg-white aspect-square" id="imagePanel">
          <img src="" alt="Service Preview" class="w-full h-full object-cover opacity-0 transition-opacity duration-300" />
      </div>
  </div>
</section>

<script>
  import { gsap } from 'gsap';
  import { ScrollTrigger } from 'gsap/ScrollTrigger';

  gsap.registerPlugin(ScrollTrigger);

  // WhatWeDo Animations
  const whatWeDoTl = gsap.timeline({
      scrollTrigger: {
          trigger: '.what-we-do-container',
          start: 'top center',
          end: 'center center',
      }
  });

  whatWeDoTl
      .from('h2', { y: 100, opacity: 0, duration: 1 })
      .to('#underline', { scaleX: 1, duration: 1 }, '-=0.5')
      .from('.service-col', {
          y: 50,
          opacity: 0,
          duration: 0.8,
          stagger: 0.2
      }, '-=0.5');

  // Image Panel Hover Effect
  const imagePanel = document.querySelector('#imagePanel img');
  if (imagePanel instanceof HTMLImageElement) {
      document.querySelectorAll('.service-col').forEach(col => {
          col.addEventListener('mouseenter', () => {
              if (col instanceof HTMLElement) {
                  const imgSrc = col.getAttribute('data-img');
                  if (imgSrc) {
                      imagePanel.src = imgSrc;
                      imagePanel.style.opacity = '1';
                  }
              }
          });

          col.addEventListener('mouseleave', () => {
              imagePanel.style.opacity = '0';
          });
      });
  }
</script>